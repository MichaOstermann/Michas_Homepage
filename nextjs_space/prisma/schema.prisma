generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native", "linux-musl-arm64-openssl-3.0.x"]
    output = "/home/ubuntu/mcgv_redesign/nextjs_space/node_modules/.prisma/client"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Relations
  blogPosts BlogPost[]
}

model Track {
  id          String   @id @default(cuid())
  title       String
  description String?
  duration    String
  category    TrackCategory
  audioUrl    String
  coverImageUrl String?
  isNew       Boolean  @default(false)
  releaseDate DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  order       Int      @default(0)
}

model Script {
  id          String         @id @default(cuid())
  title       String
  description String?
  category    ScriptCategory
  codeSnippet String
  scriptUrl   String?
  isVerified  Boolean        @default(false)
  version     String?
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  order       Int            @default(0)
}

model GamingContent {
  id          String             @id @default(cuid())
  title       String
  description String?
  type        GamingContentType
  content     String
  videoUrl    String?
  thumbnailUrl String?
  publishDate DateTime           @default(now())
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
  order       Int                @default(0)
}

model BlogPost {
  id           String     @id @default(cuid())
  title        String
  slug         String     @unique
  excerpt      String?
  content      String
  category     BlogCategory
  authorId     String
  publishDate  DateTime   @default(now())
  featuredImageUrl String?
  tags         String[]   @default([])
  published    Boolean    @default(false)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  
  // Relations
  author       User       @relation(fields: [authorId], references: [id])
}

model SiteSettings {
  id          String   @id @default(cuid())
  siteName    String   @default("Code & Beats")
  tagline     String   @default("Musik, Code & Games – vereint")
  heroTitle   String   @default("Musik, Code & Games – vereint.")
  heroSubtitle String  @default("PowerShell by day. Synthwave by night. Gaming always.")
  aboutText   String
  githubUrl   String?
  youtubeUrl  String?
  twitchUrl   String?
  twitterUrl  String?
  updatedAt   DateTime @updatedAt
  
  @@map("site_settings")
}

model ContactForm {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String
  message   String
  status    ContactStatus @default(UNREAD)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("contact_forms")
}

// CMS Models für dynamische Sektionen und Seiten
model Section {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  icon        String?
  description String?
  isActive    Boolean  @default(true)
  showInNav   Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  pages       Page[]
  
  @@map("sections")
}

model Page {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  content     String   // Rich-text content (HTML/Markdown)
  excerpt     String?
  sectionId   String
  featuredImageUrl String?
  tags        String[] @default([])
  published   Boolean  @default(true)
  showInNav   Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  section     Section  @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  
  @@map("pages")
}

// DSGVO & Privacy Models
model PrivacySettings {
  id                String   @id @default(cuid())
  cookieBannerEnabled Boolean @default(true)
  cookieBannerText String   @default("Diese Website verwendet Cookies, um Ihnen die bestmögliche Nutzererfahrung zu bieten.")
  privacyPolicyUrl String   @default("/datenschutz")
  imprintUrl      String   @default("/impressum")
  updatedAt       DateTime @updatedAt
  
  @@map("privacy_settings")
}

model LegalPage {
  id        String       @id @default(cuid())
  type      LegalPageType @unique
  title     String
  content   String
  updatedAt DateTime     @updatedAt
  
  @@map("legal_pages")
}

// Enums
enum TrackCategory {
  SYNTH
  LOFI
  AMBIENT
  PARTY
}

enum ScriptCategory {
  SYSTEM
  ADMIN
  NETZWERK
}

enum GamingContentType {
  GUIDE
  REVIEW
  CLIP
}

enum BlogCategory {
  NEWS
  MUSIK
  DEV
}

enum ContactStatus {
  UNREAD
  READ
  REPLIED
}

enum LegalPageType {
  IMPRESSUM
  DATENSCHUTZ
  AGB
}
