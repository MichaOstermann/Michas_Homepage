<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Musik (Beta) â€“ Code & Beats</title>
	<link rel="icon" type="image/svg+xml" href="../assets/media/favicon.svg" />
	<link rel="stylesheet" href="../assets/css/styles.css" />
	<link rel="stylesheet" href="../assets/css/rating-styles.css" />

	<!-- Firebase (Ratings) -->
	<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
	<style>
		.section--music { padding-top: 6rem; }
		/* Card refinements fÃ¼r Beta */
		.music-card {
			border: 2px solid rgba(6,255,240,0.18);
			border-radius: 16px;
			overflow: hidden;
			background: linear-gradient(135deg, rgba(11,15,22,0.8) 0%, rgba(20,20,30,0.85) 100%);
		}
		.music-card-image {
			width: 100%;
			object-fit: cover;
		}
	</style>
</head>
<body>
	<header class="header" role="banner">
		<nav class="nav container" role="navigation" aria-label="Hauptnavigation">
			<a class="nav__logo" href="../index.html" aria-label="ZurÃ¼ck zur Startseite">Code & Beats</a>
			<ul class="nav__menu" id="navMenu" role="list">
				<li><a class="nav__link" href="../index.html#music">Musik</a></li>
				<li><a class="nav__link" href="../index.html#contact">Kontakt</a></li>
			</ul>
		</nav>
	</header>

	<main class="main">
		<section class="section section--music" aria-labelledby="music-title">
			<div class="container">
				<div style="display:flex; justify-content:space-between; align-items:center; gap:1rem; margin-bottom:1rem;">
					<h1 id="music-title">Alle Songs (Beta)</h1>
					<a class="btn btn--neon" href="./upload.php">+ Song hochladen</a>
				</div>

				<div class="section__head" style="margin-bottom: 2rem;">
					<div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
						<a href="./party.html" class="btn btn--neon">ğŸ‰ Party Lieder</a>
						<a href="./rapp.html" class="btn btn--neon">ğŸ¤ Rapp Songs</a>
						<a href="./love.html" class="btn btn--neon">â¤ï¸ Love</a>
						<a href="./gemischt.html" class="btn btn--neon">ğŸ”€ Gemischt</a>
					</div>
				</div>

				<div class="grid grid--cards music-grid"></div>
			</div>
		</section>
	</main>

	<footer class="footer">
		<div class="container">
			<small class="txt-dim">(Beta) Â· <a href="../impressum.html" class="nav-link">Impressum</a> Â· <a href="../datenschutz.html" class="nav-link">Datenschutz</a></small>
		</div>
	</footer>

	<script src="../assets/js/cookie-consent.js" defer></script>
	<script src="../assets/js/firebase-config.js"></script>
	<script src="../assets/js/rating-system.js"></script>
	<script src="../assets/js/nav-enhanced.js" defer></script>
	<script src="../assets/js/render-tracks-beta.js" defer></script>
	
	<!-- Automatische Cover-Generierung nach Upload -->
	<script>
		(function() {
			const urlParams = new URLSearchParams(window.location.search);
			const songId = urlParams.get('generateCover');
			if (songId) {
				console.log('ğŸ¨ Starte Cover-Generierung fÃ¼r:', songId);
				
				// Visuelles Feedback
				const notification = document.createElement('div');
				notification.style.cssText = 'position:fixed;top:20px;right:20px;background:rgba(6,255,240,0.9);color:#000;padding:1rem 1.5rem;border-radius:10px;z-index:9999;font-weight:600;box-shadow:0 0 20px rgba(6,255,240,0.6);';
				notification.textContent = 'ğŸ¨ Cover wird erstellt...';
				document.body.appendChild(notification);
				
				// Cover im Hintergrund generieren
				fetch('./generate-cover.php?songId=' + encodeURIComponent(songId))
					.then(res => res.json())
					.then(data => {
						if (data.success) {
							console.log('âœ“ Cover generiert:', data.cover);
							notification.textContent = 'âœ“ Cover erstellt!';
							notification.style.background = 'rgba(0,255,136,0.9)';
							// URL-Parameter entfernen
							window.history.replaceState({}, document.title, './index.html');
							// Seite neu laden nach kurzer VerzÃ¶gerung
							setTimeout(() => window.location.reload(), 800);
						} else {
							console.warn('Cover-Generierung fehlgeschlagen:', data.error);
							notification.textContent = 'âš  Cover-Fehler (Default wird verwendet)';
							notification.style.background = 'rgba(255,140,0,0.9)';
							window.history.replaceState({}, document.title, './index.html');
							setTimeout(() => notification.remove(), 3000);
						}
					})
					.catch(err => {
						console.error('Cover-Generierung Fehler:', err);
						notification.textContent = 'âŒ Cover-Generierung fehlgeschlagen';
						notification.style.background = 'rgba(255,0,110,0.9)';
						window.history.replaceState({}, document.title, './index.html');
						setTimeout(() => notification.remove(), 3000);
					});
			}
		})();
	</script>
</body>
<!-- Minimal, funktional, isoliert fÃ¼r Live-Tests -->
</html>


